{{/* Omarchy specific */}}
{{- if lookPath "omarchy-version" }}
# Omarchy defaults
source ~/.local/share/omarchy/default/bash/rc
{{- end }}

{{/* If not on Omarchy */}}
{{- if not (lookPath "omarchy-version") }}

export PATH="$HOME/.local/bin:$PATH"

alias ..='cd ..'
alias ...='cd ../..'
alias ls='eza -lh --group-directories-first --icons=auto'
alias lsa='ls -a'
alias lt='eza --tree --level=2 --long --icons --git'
alias lta='lt -a'
alias g='git'
alias gcm='git cm'

{{- if lookPath "starship" }}
# Starship prompt
eval "$(starship init bash)"
{{- end }}

{{- end }}


# Aliases
alias dot=chezmoi
alias s='jq ".scripts" package.json'
alias p='pnpm'
alias rmr='rm -rf --one-file-system --preserve-root'
alias galias="git config --get-regexp '^alias\.'"

mcd() {
  mkdir -p "$1" && cd "$1"
}

# Edit bash profile
ep() {
  local file="$HOME/.bashrc"

  # Open source state, then apply to target when editor exits
  chezmoi edit --apply "$file" || return

  # Re-source only if we're in an interactive shell
  if [[ $- == *i* ]]; then
    # shellcheck source=/dev/null
    . "$file"
    echo "Reloaded $file"
  fi
}

# Fast Node Manager
FNM_PATH="$HOME/.local/share/fnm"
if [ -d "$FNM_PATH" ]; then
  export PATH="$FNM_PATH:$PATH"
  eval "$(fnm env --use-on-cd --shell bash)"
fi

# Bookmarks
source ~/.config/bash/bookmarks/b


# Load user-specific bash completions
if [ -d ~/.config/bash/completion.d ]; then
  for f in ~/.config/bash/completion.d/*; do
    [ -r "$f" ] && source "$f"
  done
fi

